<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>R: PDA: Privacy-preserving Distributed Algorithm</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="stylesheet" type="text/css" href="R.css" />
</head><body>

<table width="100%" summary="page for pda {pda}"><tr><td>pda {pda}</td><td style="text-align: right;">R Documentation</td></tr></table>

<h2>PDA: Privacy-preserving Distributed Algorithm</h2>

<h3>Description</h3>

<p>Fit Privacy-preserving Distributed Algorithms for linear, logistic, 
Poisson and Cox PH regression with possible heterogeneous data across sites.
</p>


<h3>Usage</h3>

<pre>
pda(ipdata,site_id,control,dir,uri,secret)
</pre>


<h3>Arguments</h3>

<table summary="R argblock">
<tr valign="top"><td><code>ipdata</code></td>
<td>
<p>Local IPD data in data frame, should include at least one column for the outcome and one column for the covariates</p>
</td></tr>
<tr valign="top"><td><code>site_id</code></td>
<td>
<p>Character site name</p>
</td></tr>
<tr valign="top"><td><code>control</code></td>
<td>
<p>pda control data</p>
</td></tr>
<tr valign="top"><td><code>dir</code></td>
<td>
<p>directory for shared flat file cloud</p>
</td></tr>
<tr valign="top"><td><code>uri</code></td>
<td>
<p>Universal Resource Identifier for this run</p>
</td></tr>
<tr valign="top"><td><code>secret</code></td>
<td>
<p>password to authenticate as site_id on uri</p>
</td></tr>
</table>


<h3>Value</h3>

<p>control
</p>
<p>control
</p>


<h3>References</h3>

<p>Michael I. Jordan, Jason D. Lee &amp; Yun Yang (2019) Communication-Efficient Distributed Statistical Inference, <br />
<em>Journal of the American Statistical Association</em>, 114:526, 668-681 <br /> 
doi: <a href="https://doi.org/10.1080/01621459.2018.1429274">10.1080/01621459.2018.1429274</a>.<br /> 
(DLM) Yixin Chen, et al. (2006) Regression cubes with lossless compression and aggregation. 
IEEE Transactions on Knowledge and Data Engineering, 18(12), pp.1585-1599. <br />
(DLMM) Chongliang Luo, et al. (2020) Lossless Distributed Linear Mixed Model with Application to Integration of Heterogeneous Healthcare Data.  
medRxiv, doi: <a href="https://doi.org/10.1101/2020.11.16.20230730">10.1101/2020.11.16.20230730</a>. <br />
(DPQL) Chongliang Luo, et al. (2021) dPQL: a lossless distributed algorithm for generalized linear mixed model with application to privacy-preserving hospital profiling. <br />
medRxiv, doi: <a href="https://doi.org/10.1101/2021.05.03.21256561">10.1101/2021.05.03.21256561</a>. <br />
(ODAL) Rui Duan, et al. (2020) Learning from electronic health records across multiple sites: <br /> 
A communication-efficient and privacy-preserving distributed algorithm. <br /> 
<em>Journal of the American Medical Informatics Association</em>, 27.3:376–385,
<br /> doi: <a href="https://doi.org/10.1093/jamia/ocz199">10.1093/jamia/ocz199</a>.<br /> 
(ODAC) Rui Duan, et al. (2020) Learning from local to global: An efficient distributed algorithm for modeling time-to-event data. <br />
<em>Journal of the American Medical Informatics Association</em>, 27.7:1028–1036, <br /> 
doi: <a href="https://doi.org/10.1093/jamia/ocaa044">10.1093/jamia/ocaa044</a>. <br />
(ODACH) Chongliang Luo, et al. (2021) ODACH: A One-shot Distributed Algorithm for Cox model with Heterogeneous Multi-center Data. <br />
<em>medRxiv</em>, doi: <a href="https://doi.org/10.1101/2021.04.18.21255694">10.1101/2021.04.18.21255694</a>. <br /> 
(ODAH) Mackenzie J. Edmondson, et al. (2021) An Efficient and Accurate Distributed Learning Algorithm for Modeling Multi-Site Zero-Inflated Count Outcomes. 
medRxiv, pp.2020-12. <br />
doi: <a href="https://doi.org/10.1101/2020.12.17.20248194">10.1101/2020.12.17.20248194</a>. <br />
(ADAP) Xiaokang Liu, et al. (2021) ADAP: multisite learning with high-dimensional heterogeneous data via A Distributed Algorithm for Penalized regression. <br />
</p>


<h3>See Also</h3>

<p><code>pdaPut</code>, <code>pdaList</code>, <code>pdaGet</code>, <code>getCloudConfig</code> and <code>pdaSync</code>.
</p>


<h3>Examples</h3>

<pre>
require(survival)
require(data.table)
require(pda)
data(lung)

## In the toy example below we aim to analyze the association of lung status with 
## age and sex using logistic regression, data(lung) from 'survival', we randomly 
## assign to 3 sites: 'site1', 'site2', 'site3'. we demonstrate using PDA ODAL can 
## obtain a surrogate estimator that is close to the pooled estimate. We run the 
## example in local directory. In actual collaboration, account/password for pda server 
## will be assigned to the sites at the server https://pda.one.
## Each site can access via web browser to check the communication of the summary stats.

## for more examples, see demo(ODAC) and demo(ODAP)

# Create 3 sites, split the lung data amongst them
sites = c('site1', 'site2', 'site3')
set.seed(42)
lung2 &lt;- lung[,c('status', 'age', 'sex')]
lung2$sex &lt;- lung2$sex - 1
lung2$status &lt;- ifelse(lung2$status == 2, 1, 0)
lung_split &lt;- split(lung2, sample(1:length(sites), nrow(lung), replace=TRUE))
## fit logistic reg using pooled data
fit.pool &lt;- glm(status ~ age + sex, family = 'binomial', data = lung2)


# ############################  STEP 1: initialize  ###############################
control &lt;- list(project_name = 'Lung cancer study',
                step = 'initialize',
                sites = sites,
                heterogeneity = FALSE,
                model = 'ODAL',
                family = 'binomial',
                outcome = "status",
                variables = c('age', 'sex'),
                optim_maxit = 100,
                lead_site = 'site1',
                upload_date = as.character(Sys.time()) )


## run the example in local directory:
## specify your working directory, default is the tempdir
mydir &lt;- tempdir()
## assume lead site1: enter "1" to allow transferring the control file  
pda(site_id = 'site1', control = control, dir = mydir)
## in actual collaboration, account/password for pda server will be assigned, thus:
## Not run: pda(site_id = 'site1', control = control, uri = 'https://pda.one', secret='abc123')
## you can also set your environment variables, and no need to specify them in pda:
## Not run: Sys.setenv(PDA_USER = 'site1', PDA_SECRET = 'abc123', PDA_URI = 'https://pda.one')
## Not run: pda(site_id = 'site1', control = control)

##' assume remote site3: enter "1" to allow tranferring your local estimate 
pda(site_id = 'site3', ipdata = lung_split[[3]], dir=mydir)

##' assume remote site2: enter "1" to allow tranferring your local estimate  
pda(site_id = 'site2', ipdata = lung_split[[2]], dir=mydir)

##' assume lead site1: enter "1" to allow tranferring your local estimate  
##' control.json is also automatically updated
pda(site_id = 'site1', ipdata = lung_split[[1]], dir=mydir)

##' if lead site1 initialized before other sites,
##' lead site1: uncomment to sync the control before STEP 2
## Not run: pda(site_id = 'site1', control = control)
## Not run: config &lt;- getCloudConfig(site_id = 'site1')
## Not run: pdaSync(config)

#' ############################'  STEP 2: derivative  ############################ 
##' assume remote site3: enter "1" to allow tranferring your derivatives  
pda(site_id = 'site3', ipdata = lung_split[[3]], dir=mydir)

##' assume remote site2: enter "1" to allow tranferring your derivatives  
pda(site_id = 'site2', ipdata = lung_split[[2]], dir=mydir)

##' assume lead site1: enter "1" to allow tranferring your derivatives  
pda(site_id = 'site1', ipdata = lung_split[[1]], dir=mydir)


#' ############################'  STEP 3: estimate  ############################ 
##' assume lead site1: enter "1" to allow tranferring the surrogate estimate  
pda(site_id = 'site1', ipdata = lung_split[[1]], dir=mydir)

##' the PDA ODAL is now completed!
##' All the sites can still run their own surrogate estimates and broadcast them.

##' compare the surrogate estimate with the pooled estimate 
config &lt;- getCloudConfig(site_id = 'site1', dir=mydir)
fit.odal &lt;- pdaGet(name = 'site1_estimate', config = config)
cbind(b.pool=fit.pool$coef,
      b.odal=fit.odal$btilde,
      sd.pool=summary(fit.pool)$coef[,2],
      sd.odal=sqrt(diag(solve(fit.odal$Htilde)/nrow(lung2))))
      
## see demo(ODAL) for more optional steps

</pre>

<hr /><div style="text-align: center;">[Package <em>pda</em> version 1.2-5 <a href="00Index.html">Index</a>]</div>
</body></html>
